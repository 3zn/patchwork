<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plot Assembly • patchwork</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Plot Assembly">
<meta property="og:description" content="">
<meta property="og:image" content="https://patchwork.data-imaginist.com/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">patchwork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/patchwork.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/guides/assembly.html">Plot Assembly</a>
    </li>
    <li>
      <a href="../../articles/guides/layout.html">Controlling Layout</a>
    </li>
    <li>
      <a href="../../articles/guides/annotation.html">Adding annotation to a patchwork</a>
    </li>
    <li>
      <a href="../../articles/guides/multipage.html">Multipage Alignment</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2019/patch-it-up-and-send-it-out/">Version 1.0.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/thomasp85/patchwork">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Plot Assembly</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/thomasp85/patchwork/blob/master/vignettes/guides/assembly.Rmd"><code>vignettes/guides/assembly.Rmd</code></a></small>
      <div class="hidden name"><code>assembly.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(patchwork)</a></code></pre></div>
<p>Before plots can be laid out, they have to be assembled. Arguably one of patchwork’s biggest selling point is that it expands on the use of <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> in ggplot2 to allow plots to be added together and composed, creating a natural extension of the ggplot2 API. There is more to it than that though, and this tutorial will teach you all about the different operators and functions available for plot assembly.</p>
<p>As always, we’ll start with a few well-known example plots:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">p1 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(mtcars) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(mpg, disp)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">'Plot 1'</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">p2 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(mtcars) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(gear, disp, <span class="dt">group =</span> gear)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">'Plot 2'</span>)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">p3 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(mtcars) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(hp, wt, <span class="dt">colour =</span> mpg)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">'Plot 3'</span>)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">p4 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(mtcars) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(gear)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span>cyl) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">'Plot 4'</span>)</a></code></pre></div>
<div id="adding-plots-to-the-patchwork" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-plots-to-the-patchwork" class="anchor"></a>Adding plots to the patchwork</h2>
<p>At this point, it shouldn’t come as a surprise that you can use <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> to add plots together to form a patchwork. If it does, I’d suggest you start out with the <a href="../patchwork.html">Getting Started</a> guide, and come back once you’ve gone through that. But, just to recap: you can add plots together, like so:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">p1 <span class="op">+</span><span class="st"> </span>p2</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>using this approach, it is possible to assemble a number of plots, but that is not the only thing that can be added. Other patchworks can be added, and will create a new nested patchwork:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">patch &lt;-<span class="st"> </span>p1 <span class="op">+</span><span class="st"> </span>p2</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">p3 <span class="op">+</span><span class="st"> </span>patch</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div id="adding-non-ggplot-content" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-non-ggplot-content" class="anchor"></a>Adding non-ggplot content</h3>
<p>Sometimes you need to have other content than ggplot2 in your patchwork. Standard grid grobs can be added to your plot as well:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">p1 <span class="op">+</span><span class="st"> </span>grid<span class="op">::</span><span class="kw"><a href="https://rdrr.io/r/grid/grid.text.html">textGrob</a></span>(<span class="st">'Some really important text'</span>)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Other packages provide even more complex grobs to add, e.g. <code>tableGrob</code> from gridExtra:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">p1 <span class="op">+</span><span class="st"> </span>gridExtra<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html">tableGrob</a></span>(mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'mpg'</span>, <span class="st">'disp'</span>)])</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Now and then, it is necessary to work with plots from the graphics package (<em>base graphics</em>). These can be added to patchwork by providing them as a one-sided formula:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">p1 <span class="op">+</span><span class="st"> </span><span class="er">~</span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp, <span class="dt">main =</span> <span class="st">'Plot 2'</span>)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Notice that the standard alignment you’d expect when adding ggplots together no longer works. In general, there is no way to get consistent alignment between ggplots and base graphics, but experiment with the different <code><a href="https://rdrr.io/r/graphics/par.html">par()</a></code> settings until you get something that works for your particular use-case. The <a href="https://cran.r-project.org/package=ggplotify/vignettes/ggplotify.html">ggplotify</a> package provides even more functionality for converting different graphics to grobs so if the standard formula interface in patchwork doesn’t work for you, do check that out.</p>
<p>The workhorse underneath the ability to add non-ggplot objects to a patchwork is <code><a href="../../reference/wrap_elements.html">wrap_elements()</a></code> which is called implicitly when adding non-ggplot objects. To get a bit more control over how your object is added, wrap the object directly in <code><a href="../../reference/wrap_elements.html">wrap_elements()</a></code>. Here you can define if the object should be aligned to the full area, or to the plot area. Combining that with setting margins to zero and not clipping the grob, you can almost get a perfect alignment:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">old_par &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="dt">mar =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">bg =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">p1 <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../../reference/wrap_elements.html">wrap_elements</a></span>(<span class="dt">panel =</span> <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp), <span class="dt">clip =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(old_par)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>An interesting side effect of this setup is that it is possible to add labels and styling to a wrapped element (though most theme settings will be ignored). All in all you can come pretty close to an aligned base plot, but this will always be a bit fiddly and ad hoc. In general it is simply recommended to use ggplot2 if at all possible.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">old_par &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="dt">mar =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">mgp =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="fl">0.25</span>, <span class="dv">0</span>), </a>
<a class="sourceLine" id="cb9-2" data-line-number="2">               <span class="dt">bg =</span> <span class="ot">NA</span>, <span class="dt">cex.axis =</span> <span class="fl">0.75</span>, <span class="dt">las =</span> <span class="dv">1</span>, <span class="dt">tcl =</span> <span class="fl">-0.25</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">p1 <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../../reference/wrap_elements.html">wrap_elements</a></span>(<span class="dt">panel =</span> <span class="op">~</span><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(mtcars<span class="op">$</span>mpg, mtcars<span class="op">$</span>disp), <span class="dt">clip =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">'Plot 2'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">plot.margin =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span>(<span class="fl">5.5</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>, <span class="dv">35</span>))</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(old_par)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Another use case for <code><a href="../../reference/wrap_elements.html">wrap_elements()</a></code> is when you need the first plot to not be a ggplot. Patchwork is not able to change the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> behavior for miscellaneous objects, and so, if they appear as the first element they must be wrapped in an object patchwork understands:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># This won't do anything</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">grid<span class="op">::</span><span class="kw"><a href="https://rdrr.io/r/grid/grid.text.html">textGrob</a></span>(<span class="st">'Text on left side'</span>) <span class="op">+</span><span class="st"> </span>p1</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; NULL</span></a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># This will work</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="../../reference/wrap_elements.html">wrap_elements</a></span>(grid<span class="op">::</span><span class="kw"><a href="https://rdrr.io/r/grid/grid.text.html">textGrob</a></span>(<span class="st">'Text on left side'</span>)) <span class="op">+</span><span class="st"> </span>p1</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div id="stacking-and-packing" class="section level3">
<h3 class="hasAnchor">
<a href="#stacking-and-packing" class="anchor"></a>Stacking and packing</h3>
<p>The <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator simply combines plots without telling patchwork anything about the desired layout. The layout, unless changed with <code><a href="../../reference/plot_layout.html">plot_layout()</a></code> (See the <a href="layout.html">Controlling Layout</a> guide), will simply be a grid with enough rows and columns to contain the number of plots, while being as square as possible. For the special case of putting plots besides each other or on top of each other patchwork provides 2 shortcut operators. <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> will place plots next to each other while <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code> will place them on top of each other.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">p1 <span class="op">/</span><span class="st"> </span>p2</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">p1 <span class="op">|</span><span class="st"> </span>p2</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>For up to 3 plots <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> will behave just as <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> but using <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> will communicate the intend of the layout better. Be aware that mixing operators will put you under the control of the operator precedence rule (e.g. <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code> will be evaluated before <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>). Because of this it is always a good idea to put sub-assemblies within braces to avoid any surprises</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">p1 <span class="op">/</span><span class="st"> </span>(p2 <span class="op">|</span><span class="st"> </span>p3)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
<div id="functional-assembly" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-assembly" class="anchor"></a>Functional assembly</h3>
<p>While using the different operators provides a clean API for assembly, it is less suited for situations where you are not in control of the plot-generation process. If you are handed a list of plot objects and want to assemble them to a patchwork it is a bit clumsy using the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator (but doable with a loop or <code><a href="https://rdrr.io/r/base/funprog.html">Reduce()</a></code>). patchwork provides <code><a href="../../reference/wrap_plots.html">wrap_plots()</a></code> for a more functional approach to assembly. It takes either separate plots or a list of them and adds them to a single patchwork. On top of that it also accepts the same arguments as <code><a href="../../reference/plot_layout.html">plot_layout()</a></code> (see the <a href="layout.html">Controlling Layouts</a> guide) so it can be used as a single solution for most assembly needs:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="../../reference/wrap_plots.html">wrap_plots</a></span>(p1, p2, p3, p4)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
</div>
<div id="nesting-the-left-hand-side" class="section level2">
<h2 class="hasAnchor">
<a href="#nesting-the-left-hand-side" class="anchor"></a>Nesting the left-hand side</h2>
<p>As plots will always be added to the patchwork on the left-hand side, it is not possible to nest the left-hand side beside the right-hand side with the standard operators shown above. This can lead to surprising behavior:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">patch &lt;-<span class="st"> </span>p1 <span class="op">+</span><span class="st"> </span>p2</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">p3 <span class="op">+</span><span class="st"> </span>patch</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>will nest the right-hand side, while the same is not true for the left-hand side below</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">patch <span class="op">+</span><span class="st"> </span>p3</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>This behavior is necessary to allow patchworks to be build up gradually, but will get in the way if the left-hand side have to nested. patchwork provides the <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code> operator for this exact situation. It should conceptually be understood as a hyphen and not a minus, in that it keeps each side from each other (it puts both on the same nesting level)</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">patch <span class="op">-</span><span class="st"> </span>p3</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>There are currently no version of <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code> and <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> that has this behavior, so it is necessary to specify <code>ncol = 1</code>/<code>nrow = 1</code> explicitly in <code><a href="../../reference/plot_layout.html">plot_layout()</a></code> to get this behavior with left-hand side nesting.</p>
<p>Another way to solve this is with <code><a href="../../reference/wrap_plots.html">wrap_plots()</a></code>, which will put all its input on the same nesting level, irrespective of order:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw"><a href="../../reference/wrap_plots.html">wrap_plots</a></span>(patch, p3)</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
<div id="modifying-patches" class="section level2">
<h2 class="hasAnchor">
<a href="#modifying-patches" class="anchor"></a>Modifying patches</h2>
<p>When creating a patchwork, the resulting object remain a ggplot object referencing the last added plot. This means that you can continue to add objects such as geoms, scales, etc. to it as you would a normal ggplot:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">p1 <span class="op">+</span><span class="st"> </span>p2 <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(gear, disp))</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
<p>if you need to modify another patch of the patchwork you can access and/or modify it with double-bracket indexing. This is useful if you work with a function that returns a patchwork and you want to modify one of the subplots:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">patchwork &lt;-<span class="st"> </span>p1 <span class="op">+</span><span class="st"> </span>p2</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">patchwork[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>patchwork[[<span class="dv">1</span>]] <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>()</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">patchwork</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<div id="modifying-everything" class="section level3">
<h3 class="hasAnchor">
<a href="#modifying-everything" class="anchor"></a>Modifying everything</h3>
<p>Often, especially when it comes to theming, you want to modify everything at once. patchwork provides two additional operators that facilitates this. <code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code> will add the element to all subplots in the patchwork, and <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> will add the element to all the subplots in the current nesting level. As with <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> and <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code>, be aware that operator precedence must be kept in mind.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">patchwork &lt;-<span class="st"> </span>p3 <span class="op">/</span><span class="st"> </span>(p1 <span class="op">|</span><span class="st"> </span>p2)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">patchwork <span class="op">&amp;</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>()</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">patchwork <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>()</a></code></pre></div>
<p><img src="assembly_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
</div>
</div>
<div id="want-more" class="section level2">
<h2 class="hasAnchor">
<a href="#want-more" class="anchor"></a>Want more?</h2>
<p>This is everything there is to know about combining and modifying patches in a patchwork. Be sure to check out the other guides for more about controlling <a href="layout.html">layouts</a> and <a href="annotation.html">annotations</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#adding-plots-to-the-patchwork">Adding plots to the patchwork</a></li>
      <li><a href="#nesting-the-left-hand-side">Nesting the left-hand side</a></li>
      <li><a href="#modifying-patches">Modifying patches</a></li>
      <li><a href="#want-more">Want more?</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://data-imaginist.com">Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
